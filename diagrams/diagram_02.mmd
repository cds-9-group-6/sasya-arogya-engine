stateDiagram-v2
    [*] --> INITIAL: ðŸš€ New Session
    
    INITIAL --> CLASSIFYING: ðŸ“¸ Image + Context Available
    INITIAL --> FOLLOWUP: â“ Missing Information
    INITIAL --> ERROR: âŒ Invalid Input
    
    CLASSIFYING --> PRESCRIBING: âœ… Disease Identified
    CLASSIFYING --> FOLLOWUP: ðŸ” Need More Info
    CLASSIFYING --> ERROR: ðŸ’¥ Classification Failed
    
    PRESCRIBING --> INSURANCE: ðŸ’Š Treatment Generated
    PRESCRIBING --> VENDOR_QUERY: ðŸª User Wants Vendors
    PRESCRIBING --> COMPLETED: âœ… No Further Action
    
    INSURANCE --> VENDOR_QUERY: ðŸ›¡ï¸ Insurance Calculated
    INSURANCE --> COMPLETED: ðŸ›¡ï¸ Insurance Only
    
    VENDOR_QUERY --> SHOW_VENDORS: ðŸ‘ User Confirms
    VENDOR_QUERY --> COMPLETED: âŒ No Vendors Needed
    
    SHOW_VENDORS --> ORDER_BOOKING: ðŸ›’ Vendor Selected
    SHOW_VENDORS --> COMPLETED: âŒ No Selection
    
    ORDER_BOOKING --> FOLLOWUP: ðŸ“ Order Placed
    ORDER_BOOKING --> COMPLETED: âœ… Order Complete
    
    FOLLOWUP --> INITIAL: ðŸ”„ New Request
    FOLLOWUP --> CLASSIFYING: ðŸ” Reclassify
    FOLLOWUP --> PRESCRIBING: ðŸ’Š Regenerate
    FOLLOWUP --> COMPLETED: ðŸ Session End
    
    ERROR --> [*]: ðŸ’€ Session Terminated
    COMPLETED --> [*]: âœ… Session Complete
    
    note right of INITIAL: Entry point with context extraction
    note right of CLASSIFYING: CNN disease classification
    note right of PRESCRIBING: RAG-based recommendations
    note right of INSURANCE: Premium calculation & comparison
    note right of VENDOR_QUERY: Ask user about vendor preferences
    note right of SHOW_VENDORS: Display local vendors & pricing
    note right of ORDER_BOOKING: Process order with selected vendor
    note right of FOLLOWUP: Handle additional questions & navigation
    note right of COMPLETED: Terminal state with contextual follow-ups
    note right of ERROR: Error handling and recovery