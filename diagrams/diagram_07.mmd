graph TB
    subgraph "Load Balancer Layer"
        A[âš–ï¸ NGINX/HAProxy]
        B[ðŸ”’ SSL Termination]
        C[âš¡ Rate Limiting]
        D[â¤ï¸ Health Checks]
    end
    
    subgraph "Application Layer"
        E[ðŸ”„ Engine Instance 1]
        F[ðŸ”„ Engine Instance 2]
        G[ðŸ”„ Engine Instance N]
    end
    
    subgraph "Data Layer"
        H[âš¡ Redis Cluster]
        I[ðŸ—„ï¸ PostgreSQL Cluster]
        J[ðŸ’¾ MinIO/S3 Storage]
    end
    
    subgraph "External Services"
        K[ðŸ¤– Ollama LLM Cluster]
        L[ðŸ“ˆ MLflow Server]
        M[ðŸ“Š Monitoring Stack]
    end
    
    subgraph "Infrastructure"
        N[â˜¸ï¸ Kubernetes/Docker Swarm]
        O[ðŸ•¸ï¸ Service Mesh]
        P[ðŸ” Secrets Management]
        Q[ðŸ’¾ Backup & Recovery]
    end
    
    A --> E
    A --> F
    A --> G
    
    E --> H
    F --> H
    G --> H
    
    E --> I
    F --> I
    G --> I
    
    E --> J
    F --> J
    G --> J
    
    E --> K
    F --> K
    G --> K
    
    E --> L
    F --> L
    G --> L
    
    E --> M
    F --> M
    G --> M
    
    E --> N
    F --> N
    G --> N
    
    N --> O
    O --> P
    P --> Q
    
    classDef lbLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef appLayer fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef dataLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef externalLayer fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef infraLayer fill:#f1f8e9,stroke:#33691e,stroke-width:2px
    
    class A,B,C,D lbLayer
    class E,F,G appLayer
    class H,I,J dataLayer
    class K,L,M externalLayer
    class N,O,P,Q infraLayer