graph TB
    subgraph "Application Layer"
        A[ðŸŒ FastAPI Server]
        B[ðŸ”„ FSM Workflow]
        C[ðŸ§  ML Models]
        D[ðŸ”Œ External Services]
    end
    
    subgraph "Instrumentation Layer"
        E[ðŸ“Š OpenTelemetry SDK]
        F[ðŸ“ˆ Custom Metrics]
        G[ðŸ” Distributed Tracing]
        H[ðŸ“ Structured Logging]
    end
    
    subgraph "Collection & Processing"
        I[ðŸ“Š OTel Collector]
        J[ðŸ“ˆ Prometheus Scraper]
        K[ðŸ“ Log Aggregator]
        L[ðŸ” Trace Processor]
    end
    
    subgraph "Storage & Analysis"
        M[ðŸ“ˆ Prometheus TSDB]
        N[ðŸ” Jaeger Backend]
        O[ðŸ“Š Grafana Dashboards]
        P[ðŸš¨ Alert Manager]
    end
    
    subgraph "Visualization Layer"
        Q[ðŸ“Š System Health Dashboard]
        R[ðŸ§  ML Performance Dashboard]
        S[ðŸ“ˆ Business Metrics Dashboard]
        T[âŒ Error Analysis Dashboard]
    end
    
    A --> E
    B --> E
    C --> E
    D --> E
    
    E --> F
    E --> G
    E --> H
    
    F --> I
    G --> I
    H --> K
    
    I --> J
    J --> M
    K --> M
    L --> N
    
    M --> O
    N --> O
    O --> Q
    O --> R
    O --> S
    O --> T
    
    M --> P
    P --> Q
    
    classDef appLayer fill:#e3f2fd,stroke:#0277bd,stroke-width:2px
    classDef instrumentationLayer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef collectionLayer fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef storageLayer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef visualizationLayer fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    
    class A,B,C,D appLayer
    class E,F,G,H instrumentationLayer
    class I,J,K,L collectionLayer
    class M,N,O,P storageLayer
    class Q,R,S,T visualizationLayer