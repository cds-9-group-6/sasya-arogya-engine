graph TB
    subgraph "Input Processing Layer"
        A[ðŸ“¸ Image Upload]
        B[ðŸ’¬ Text Query]
        C[ðŸ” Context Extraction]
    end
    
    subgraph "Computer Vision Pipeline"
        D[ðŸ–¼ï¸ Image Preprocessing]
        E[ðŸ§  CNN Disease Classifier]
        F[ðŸ‘ï¸ Attention Visualization]
        G[ðŸ“Š Confidence Scoring]
    end
    
    subgraph "Natural Language Processing"
        H[ðŸŽ¯ Intent Analysis]
        I[ðŸ” Context Extraction]
        J[ðŸ·ï¸ Entity Recognition]
        K[ðŸ˜Š Sentiment Analysis]
    end
    
    subgraph "Large Language Models"
        L[ðŸ¤– Ollama LLM Server]
        M[ðŸ’­ Response Generation]
        N[ðŸ¤” Decision Making]
        O[ðŸ’¬ Conversation Management]
    end
    
    subgraph "Knowledge Retrieval"
        P[ðŸ“š RAG System]
        Q[ðŸ” Vector Search]
        R[ðŸ’Š Treatment Database]
        S[ðŸ“‹ Prescription Generation]
    end
    
    subgraph "Model Management"
        T[ðŸ“ˆ MLflow Tracking]
        U[ðŸ·ï¸ Model Versioning]
        V[ðŸ“Š Performance Monitoring]
        W[ðŸ§ª Experiment Tracking]
    end
    
    A --> D
    B --> H
    C --> I
    
    D --> E
    E --> F
    F --> G
    
    H --> L
    I --> L
    J --> L
    K --> L
    
    L --> M
    L --> N
    L --> O
    
    M --> P
    P --> Q
    Q --> R
    R --> S
    
    E --> T
    L --> T
    P --> T
    T --> U
    T --> V
    T --> W
    
    classDef inputLayer fill:#e3f2fd,stroke:#0277bd,stroke-width:2px
    classDef visionLayer fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef nlpLayer fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef llmLayer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef knowledgeLayer fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef managementLayer fill:#f1f8e9,stroke:#689f38,stroke-width:2px
    
    class A,B,C inputLayer
    class D,E,F,G visionLayer
    class H,I,J,K nlpLayer
    class L,M,N,O llmLayer
    class P,Q,R,S knowledgeLayer
    class T,U,V,W managementLayer